//////////////////////////////////////////////////////
// DB per community di ricette per studenti fuorisede
// 15 entità – completo e scalabile
//////////////////////////////////////////////////////

//////////////////////////////////////////////////////
// 1) Utenti
//////////////////////////////////////////////////////
Table Users {
  ID char(36) [primary key]
  Username varchar [not null, unique]
  Email varchar [not null, unique]
  Password char(128) [not null]
  Avatar blob
  admin bool [default: false]
}

//////////////////////////////////////////////////////
// 2) Ricette
//////////////////////////////////////////////////////
Table Recipes {
  ID char(36) [primary key]
  Title varchar(50) [not null]
  Description text
  Difficulty enum('Easy','Medium','Hard')
  Cooking_time int
  Servings int
  UserID char(36) [not null]
}

Ref: Recipes.UserID > Users.ID

//////////////////////////////////////////////////////
// 3) Ingredienti
//////////////////////////////////////////////////////
Table Ingredients {
  ID char(36) [primary key]
  Name varchar [not null, unique]
  Category varchar(20)
  BarCode varchar
}

//////////////////////////////////////////////////////
// 4) Ingredienti delle ricette (N-N)
//////////////////////////////////////////////////////
Table RecipeIngredients {
  ID char(36) [primary key]
  Ingredient_id integer [not null]
  Quantity varchar
  Unit varchar
}

Ref: RecipeIngredients.ID > Recipes.ID
Ref: RecipeIngredients.ID > Ingredients.ID

//////////////////////////////////////////////////////
// 5) Commenti
//////////////////////////////////////////////////////
Table Comments {
  ID integer [primary key, increment]
  UserID char(36) [not null]
  RecipeID integer [not null]
  Body text [not null]
  Rating int
  CreatedAt timestamp [default: `CURRENT_TIMESTAMP`]
}

Ref: Comments.UserID > Users.ID
Ref: Comments.RecipeID > Recipes.ID

//////////////////////////////////////////////////////
// 6) Foto ricette
//////////////////////////////////////////////////////
Table RecipePhotos {
  ID integer [primary key, increment]
  RecipeID integer [not null]
  Photo blob [not null]
  UploadedAt timestamp [default: `CURRENT_TIMESTAMP`]
}

Ref: RecipePhotos.RecipeID > Recipes.ID


//////////////////////////////////////////////////////
// 8) Likes ricette
//////////////////////////////////////////////////////
Table RecipeLikes {
  ID integer [primary key, increment]
  UserID char(36) [not null]
  RecipeID integer [not null]
  CreatedAt timestamp [default: `CURRENT_TIMESTAMP`]
}

Ref: RecipeLikes.UserID > Users.ID
Ref: RecipeLikes.RecipeID > Recipes.ID


